//line :1
package gF9mZs2

import (
	context "fOYpb3F03EG"
	"internal/bytealg"
	"runtime"
	sync "sync"
)

type uPtFhw struct {
	sync.LhBfwn6wa1x		
	dBENHw	bool
	dERABKyXQio	bool
	bdF0JaBaZ	bool
}

var kr11III uPtFhw



func kD5IbHeEWxIx() bool {
	 /*line :1*/ kr11III.LhBfwn6wa1x.Do(kr11III.rAKCx8)
	return kr11III.dBENHw
}



func fJlCPjIw() bool {
	 /*line :1*/ kr11III.LhBfwn6wa1x.Do(kr11III.rAKCx8)
	return kr11III.dERABKyXQio
}




func gyok94ZA() bool {

	switch runtime.GOOS {
	case "dragonfly", "openbsd":
		return false
	}

	 /*line :1*/ kr11III.LhBfwn6wa1x.Do(kr11III.rAKCx8)
	return kr11III.bdF0JaBaZ
}


type nTzeZ5mf []EqbMXsaU1lE


func rnth8PRZsE2C(qxwkC3VxG0 EqbMXsaU1lE) bool {
	switch qxwkC3VxG0 := qxwkC3VxG0.(type) {
	case *HiOzqOVjN1P:
		return  /*line :1*/ qxwkC3VxG0.ERvaNiiVmytR.To4() != nil
	case *ZaffanpNx4:
		return  /*line :1*/ qxwkC3VxG0.ERvaNiiVmytR.To4() != nil
	case *FZJphYv9hV:
		return  /*line :1*/ qxwkC3VxG0.GdouSNq80bRw.To4() != nil
	}
	return false
}


func d97fXz3(qxwkC3VxG0 EqbMXsaU1lE) bool	{ return ! /*line :1*/ rnth8PRZsE2C(qxwkC3VxG0) }




func (md4QSRkO nTzeZ5mf) dyGWFsnhi4(vsbiWLn7reX, qxwkC3VxG0 string) EqbMXsaU1lE {
	var orh6oJ bool
	switch vsbiWLn7reX {
	case "ip":

		orh6oJ =  /*line :1*/ mB0PZSLg9(qxwkC3VxG0, ':') > 0
	case "tcp", "udp":

		orh6oJ =  /*line :1*/ mB0PZSLg9(qxwkC3VxG0, '[') > 0
	}
	if orh6oJ {
		return  /*line :1*/ md4QSRkO.g_D_9T(d97fXz3)
	}
	return  /*line :1*/ md4QSRkO.g_D_9T(rnth8PRZsE2C)
}



func (md4QSRkO nTzeZ5mf) g_D_9T(bBvl2G func(EqbMXsaU1lE) bool) EqbMXsaU1lE {
	for _, qxwkC3VxG0 := range md4QSRkO {
		if  /*line :1*/ bBvl2G(qxwkC3VxG0) {
			return qxwkC3VxG0
		}
	}
	return md4QSRkO[0]
}







func (md4QSRkO nTzeZ5mf) eK8V6eXO0Mx(bBvl2G func(EqbMXsaU1lE) bool) (uR_fXZoDIy, vYb2cNv nTzeZ5mf) {
	var jbkZxpq_Pw6 bool
	for eaAUaB7Z, qxwkC3VxG0 := range md4QSRkO {
		oLLTlifxsXBR :=  /*line :1*/ bBvl2G(qxwkC3VxG0)
		if eaAUaB7Z == 0 || oLLTlifxsXBR == jbkZxpq_Pw6 {
			jbkZxpq_Pw6 = oLLTlifxsXBR
			uR_fXZoDIy =  /*line :1*/ append(uR_fXZoDIy, qxwkC3VxG0)
		} else {
			vYb2cNv =  /*line :1*/ append(vYb2cNv, qxwkC3VxG0)
		}
	}
	return
}





func uam46Y_Ge(bF1jYjlJ func(FZJphYv9hV) bool, ecxaiU5w1ARk []FZJphYv9hV, fYCJzGOCNzF func(FZJphYv9hV) EqbMXsaU1lE, rl3iiPm string) (nTzeZ5mf, error) {
	var md4QSRkO nTzeZ5mf
	for _, kQ8_UEhxU := range ecxaiU5w1ARk {
		if bF1jYjlJ == nil ||  /*line :1*/ bF1jYjlJ(kQ8_UEhxU) {
			md4QSRkO =  /*line :1*/ append(md4QSRkO,  /*line :1*/ fYCJzGOCNzF(kQ8_UEhxU))
		}
	}
	if  /*line :1*/ len(md4QSRkO) == 0 {
		return nil, &DAWLIQHc{Z68v0y:  /*line :1*/ xgpz6w9m.Error(), BCCnAgFxG: rl3iiPm}
	}
	return md4QSRkO, nil
}


func sUnvJzM(qxwkC3VxG0 FZJphYv9hV) bool {
	return  /*line :1*/ qxwkC3VxG0.GdouSNq80bRw.To4() != nil
}


func q_vcfH(qxwkC3VxG0 FZJphYv9hV) bool {
	return  /*line :1*/ len(qxwkC3VxG0.GdouSNq80bRw) == IPv6len &&  /*line :1*/ qxwkC3VxG0.GdouSNq80bRw.To4() == nil
}










func K6ycxP(tfhbCJ string) (jKxI_T1CK_p, mzUgFPgljgC string, h_ljk48Bm error) {
	const (
		missingPort	= "missing port in address"
		tooManyColons	= "too many colons in address"
	)
	gxxI3Qnsm := func(qxwkC3VxG0, km6rB4 string) (jKxI_T1CK_p, mzUgFPgljgC string, h_ljk48Bm error) {
		return "", "", &DAWLIQHc{Z68v0y: km6rB4, BCCnAgFxG: qxwkC3VxG0}
	}
	kVgtfLFZ, cKWyWbG8T7WN := 0, 0

	eaAUaB7Z :=  /*line :1*/ vMwVxD_U(tfhbCJ, ':')
	if eaAUaB7Z < 0 {
		return  /*line :1*/ gxxI3Qnsm(tfhbCJ, missingPort)
	}

	if tfhbCJ[0] == '[' {

		aVR6y8hT6S4 :=  /*line :1*/ bytealg.IndexByteString(tfhbCJ, ']')
		if aVR6y8hT6S4 < 0 {
			return  /*line :1*/ gxxI3Qnsm(tfhbCJ, "missing ']' in address")
		}
		switch aVR6y8hT6S4 + 1 {
		case  /*line :1*/ len(tfhbCJ):

			return  /*line :1*/ gxxI3Qnsm(tfhbCJ, missingPort)
		case eaAUaB7Z:

		default:

			if tfhbCJ[aVR6y8hT6S4+1] == ':' {
				return  /*line :1*/ gxxI3Qnsm(tfhbCJ, tooManyColons)
			}
			return  /*line :1*/ gxxI3Qnsm(tfhbCJ, missingPort)
		}
		jKxI_T1CK_p = tfhbCJ[1:aVR6y8hT6S4]
		kVgtfLFZ, cKWyWbG8T7WN = 1, aVR6y8hT6S4+1
	} else {
		jKxI_T1CK_p = tfhbCJ[:eaAUaB7Z]
		if  /*line :1*/ bytealg.IndexByteString(jKxI_T1CK_p, ':') >= 0 {
			return  /*line :1*/ gxxI3Qnsm(tfhbCJ, tooManyColons)
		}
	}
	if  /*line :1*/ bytealg.IndexByteString(tfhbCJ[kVgtfLFZ:], '[') >= 0 {
		return  /*line :1*/ gxxI3Qnsm(tfhbCJ, "unexpected '[' in address")
	}
	if  /*line :1*/ bytealg.IndexByteString(tfhbCJ[cKWyWbG8T7WN:], ']') >= 0 {
		return  /*line :1*/ gxxI3Qnsm(tfhbCJ, "unexpected ']' in address")
	}

	mzUgFPgljgC = tfhbCJ[eaAUaB7Z+1:]
	return jKxI_T1CK_p, mzUgFPgljgC, nil
}

func jewoNRQXK6(dRoFccaZ string) (jKxI_T1CK_p, dJhOHOEZlQAA string) {

	if eaAUaB7Z :=  /*line :1*/ vMwVxD_U(dRoFccaZ, '%'); eaAUaB7Z > 0 {
		jKxI_T1CK_p, dJhOHOEZlQAA = dRoFccaZ[:eaAUaB7Z], dRoFccaZ[eaAUaB7Z+1:]
	} else {
		jKxI_T1CK_p = dRoFccaZ
	}
	return
}






func Vd5lcUxG(jKxI_T1CK_p, mzUgFPgljgC string) string {

	if  /*line :1*/ bytealg.IndexByteString(jKxI_T1CK_p, ':') >= 0 {
		return "[" + jKxI_T1CK_p + "]:" + mzUgFPgljgC
	}
	return jKxI_T1CK_p + ":" + mzUgFPgljgC
}





func (yxhs4Z *W8Q2tfHAD) hCHWGoQGe2q(yESLyde9LHhT context.MBCyA6, gF9mZs2, qxwkC3VxG0 string) (nTzeZ5mf, error) {
	var (
		h_ljk48Bm	error
		jKxI_T1CK_p, mzUgFPgljgC	string
		vSPe2n3S	int
	)
	switch gF9mZs2 {
	case "tcp", "tcp4", "tcp6", "udp", "udp4", "udp6":
		if qxwkC3VxG0 != "" {
			if jKxI_T1CK_p, mzUgFPgljgC, h_ljk48Bm =  /*line :1*/ K6ycxP(qxwkC3VxG0); h_ljk48Bm != nil {
				return nil, h_ljk48Bm
			}
			if vSPe2n3S, h_ljk48Bm =  /*line :1*/ yxhs4Z.LookupPort(yESLyde9LHhT, gF9mZs2, mzUgFPgljgC); h_ljk48Bm != nil {
				return nil, h_ljk48Bm
			}
		}
	case "ip", "ip4", "ip6":
		if qxwkC3VxG0 != "" {
			jKxI_T1CK_p = qxwkC3VxG0
		}
	default:
		return nil,  /*line :1*/ JFaUU0ZaU(gF9mZs2)
	}
	fYCJzGOCNzF := func(kQ8_UEhxU FZJphYv9hV) EqbMXsaU1lE {
		switch gF9mZs2 {
		case "tcp", "tcp4", "tcp6":
			return &HiOzqOVjN1P{ERvaNiiVmytR: kQ8_UEhxU.GdouSNq80bRw, EGf1xSAbsOU5: vSPe2n3S, RgTF6a1Xmo: kQ8_UEhxU.Cyg5M2vYIby}
		case "udp", "udp4", "udp6":
			return &ZaffanpNx4{ERvaNiiVmytR: kQ8_UEhxU.GdouSNq80bRw, EGf1xSAbsOU5: vSPe2n3S, RgTF6a1Xmo: kQ8_UEhxU.Cyg5M2vYIby}
		case "ip", "ip4", "ip6":
			return &FZJphYv9hV{GdouSNq80bRw: kQ8_UEhxU.GdouSNq80bRw, Cyg5M2vYIby: kQ8_UEhxU.Cyg5M2vYIby}
		default:
			 /*line :1*/ panic("unexpected network: " + gF9mZs2)
		}
	}
	if jKxI_T1CK_p == "" {
		return nTzeZ5mf{ /*line :1*/ fYCJzGOCNzF(FZJphYv9hV{})}, nil
	}

	ecxaiU5w1ARk, h_ljk48Bm :=  /*line :1*/ yxhs4Z.ffGrcqOlo(yESLyde9LHhT, gF9mZs2, jKxI_T1CK_p)
	if h_ljk48Bm != nil {
		return nil, h_ljk48Bm
	}

	if  /*line :1*/ len(ecxaiU5w1ARk) == 1 &&  /*line :1*/ ecxaiU5w1ARk[0].GdouSNq80bRw.Equal(VIAfFsvboRvQ) {
		ecxaiU5w1ARk =  /*line :1*/ append(ecxaiU5w1ARk, FZJphYv9hV{GdouSNq80bRw: WHSMKoapR})
	}

	var bF1jYjlJ func(FZJphYv9hV) bool
	if gF9mZs2 != "" && gF9mZs2[ /*line :1*/ len(gF9mZs2)-1] == '4' {
		bF1jYjlJ = sUnvJzM
	}
	if gF9mZs2 != "" && gF9mZs2[ /*line :1*/ len(gF9mZs2)-1] == '6' {
		bF1jYjlJ = q_vcfH
	}
	return  /*line :1*/ uam46Y_Ge(bF1jYjlJ, ecxaiU5w1ARk, fYCJzGOCNzF, jKxI_T1CK_p)
}

func gygXisQVD(gF9mZs2 string) GNraIvYhB {
	if gF9mZs2 != "" && gF9mZs2[ /*line :1*/ len(gF9mZs2)-1] == '6' {
		return ICyGsSLLvx
	}
	return GNraIvYhB{127, 0, 0, 1}
}
